
<!DOCTYPE HTML>
<html>
<head>
<title>The Eracle Website Template | Home </title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
<link rel="stylesheet" type="text/css" href="css/magnific-popup.css">
<script type="text/javascript" src="js/jquery.min.js"></script>
		<!-----768px-menu----->
		<link type="text/css" rel="stylesheet" href="css/jquery.mmenu.all.css" />
		<script type="text/javascript" src="js/jquery.mmenu.js"></script>
			<script type="text/javascript">
				//	The menu on the left
				$(function() {
					$('nav#menu-left').mmenu();
				});
		</script>
		<!-----//768px-menu----->
</head>
<body>
<!-- start header -->
<div class="header_bg">
<div class="wrap">
	<div class="header">
		<div class="logo">
			<a href="index.html">
				<img src="images/lg.png" alt=""/>
				<h1>ERACLE</h1>
				<div class="clear"> </div>
			 </a>
		</div>
		<div class="h_menu_login">
		  			<ul>
						<li><a href="login.html">登录</a></li>
						<!-- <li><a href="blog.html">登出</a></li> -->
		  			</ul>
		  		</div>
		<div class="clear"> </div>
	</div>
</div>
</div>
<!-- start header -->
<div class="header_btm">
	<div class="wrap">
		<!------start-768px-menu---->
			<div id="page">
					<div id="header">
						<a class="navicon" href="#menu-left"> </a>
					</div>
					<nav id="menu-left">
						<ul>
							<li ><a href="index.html">Home</a></li>
							<li><a href="campus.html">专业介绍</a></li>
							<li><a href="profession.html">校园风景</a></li>
							<li><a href="lifeguide.html">日常生活指导</a></li>
							<li><a href="careerplan.html">职业规划推荐</a></li>
							<li><a href="community.html">社团推荐</a></li>
							<li class="active"><a href="bbss.html">论坛交流</a></li>
						</ul>
					</nav>
			</div>
		<!------start-768px-menu---->
			<div class="header_sub">
				<div class="h_menu">
					<ul>
						<li ><a href="index.html">Home</a></li>
						<li><a href="campus.html">专业介绍</a></li>
						<li><a href="profession.html">校园风景</a></li>
						<li><a href="lifeguide.html">日常生活指导</a></li>
						<li><a href="careerplan.html">职业规划推荐</a></li>
						<li><a href="community.html">社团推荐</a></li>
						<li class="active"><a href="bbss.html">论坛交流</a></li>
					</ul>
				</div>
				
				<div class="clear"> </div>
			</div>
	</div>
</div>
<!--------start-blog----------->
<div class="blog">
	<div class="main">
		  	<div class="wrap">
				<div class="comments-area">
					<h4>Leave a Comment</h4>
					<div class="container" style="margin-top:50px">
						<form>
							<textarea class="form-control" rows="3" id="pl"></textarea>

							<div class="col-md-offset-10" style="margin-top:20px">
								<div class="btn btn-default btn-sm">
									<span class="glyphicon glyphicon-remove"></span>取消
								</div>&nbsp;&nbsp;&nbsp;&nbsp;
								<div class="btn btn-default btn-sm" id="sub">
									<span type="button" class="glyphicon glyphicon-ok"></span>提交
								</div>
							</div>


							<div class="col-md-offset-1" style="margin-top:50px">
								<ul id="pls"></ul>
							</div>
						</form>
					</div>
				</div>
<!----//End-content---->
	</div>
</div>	
</div>	
<!--------//end-blog----------->
<div class="footer">
	<div class="wrap">
		<div class="footer-left">
			<h3></h3>
			<p></p>
			<p></p>
			<div class="soc_icons soc_icons1">

			</div>
		</div>
		<div class="footer-right">
			<h3></h3>
			<div class="comments1">
				<p></p>
				<span></span>
			</div>
			<div class="comments1">
				<p></p>
				<span></span>
			</div>
		</div>
		<div class="clear"> </div>
	</div>
</div>
			<div class="copy">

			  </div>
<script src="js/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
	var datas = [
		{
			id: '1',
			pid: '',
			cont: 'aaa'
		},
		{
			id: '2',
			pid: '',
			cont: 'bbb'
		},
		{
			id: '4',
			pid: '2',
			cont: 'dd'
		},
		{
			id: '5',
			pid: '1',
			cont: 'ee'
		},
		{
			id: '3',
			pid: '5',
			cont: 'ccc'
		}
	]


	$(function () {
//加载评论
		$.get("", "", function (res) {
//if ();
			for (var i = 0; i < datas.length; i++) {
				ItemDataGetTree( datas, datas[i], datas[i].pid)
			}
		});

//遍历数据生成树
		function ItemDataGetTree( datas, data, pid) {

			htmlText = "<li id='" + data.id + "'>"
					+ data.cont
					+ "<div class='col-md-offset-8'>"
					+ "评论人："
					+ "游客"
					+ "&nbsp;&nbsp;&nbsp;&nbsp;"
					+ getDate()
					+ "</div>"
					+ "<div class=' hidden'>"
					+ "<form> "
					+ " <textarea class='form-control' rows='3' id='pl'></textarea> "
					+ "</form> "
					+ "<div class='col-md-offset-10' style='margin-top:20px'> "
					+ "<div class='btn btn-default btn-sm' onclick='replayCancel(this)'> "
					+ " <span class='glyphicon glyphicon-remove'</span>取消 "
					+ "</div>&nbsp;&nbsp;&nbsp;&nbsp; "
					+ " <div class='btn btn-default btn-sm' onclick='replayOk(this)'> "
					+ "<span class='glyphicon glyphicon-ok'></span>提交 "
					+ " </div> "
					+ " </div> "
					+ "</div>"
					+ "<div class='col-md-offset-10'>"
					+ "<a href='#' onclick='replay(this)'>回复</a>"
					+ "</div>"
					+ "<hr/></li>"
			if (data.pid == "")
			{
				$("#pls").append(htmlText);
				for (var i = 0; i < datas.length; i++)
				{
					if (datas[i].id == pid) {
						ItemDataGetTree(datas, datas[i], datas[i].pid)
					}
				}
			} else
			{
				$("#" + data.pid + "").append("<ul>" + htmlText + "<ul>");
			}
		}
		$("li").mouseenter(function () {
			$(this).css("background-color", "#EEEEEE");
		});
		$("li").mouseleave(function () {
			$(this).css("background-color", "#fff");
		});

//绑定评论事件
		$("#sub").unbind("click").bind("click", function () {

			if ($("#pl").val() == "" || $("#pl").val() == null) {
				return;
			}
			htmlText = "<li>"
					+ $("#pl").val()
					+ "<div class='col-md-offset-8'>"
					+ "评论人："
					+ "游客"
					+ "&nbsp;&nbsp;&nbsp;&nbsp;"
					+ getDate()
					+ "</div>"
					+ "<div class=' hidden'>"
					+ "<form> "
					+ " <textarea class='form-control' rows='3' id='pl'></textarea> "
					+ "</form> "
					+ "<div class='col-md-offset-10' style='margin-top:20px'> "
					+ "<div class='btn btn-default btn-sm' onclick='replayCancel(this)'> "
					+ " <span class='glyphicon glyphicon-remove'</span>取消 "
					+ "</div>&nbsp;&nbsp;&nbsp;&nbsp; "
					+ " <div class='btn btn-default btn-sm' onclick='replayOk(this)'> "
					+ "<span class='glyphicon glyphicon-ok'></span>提交 "
					+ " </div> "
					+ " </div> "
					+ "</div>"
					+ "<div class='col-md-offset-10'>"
					+ "<a href='#' onclick='replay(this)'>回复</a>"
					+ "</div>"
					+ "<hr/></li>"
			$("#pls").append(htmlText);

			$("li").mouseenter(function () {
				$(this).css("background-color", "#EEEEEE");
			});
			$("li").mouseleave(function () {
				$(this).css("background-color", "#fff");
			});

		});
	});
	//点击回复按钮
	function replay(t) {
		self = $(t);
		self.parent().prev().removeClass("hidden");
	}
	//回复点击确定按钮
	function replayOk(t) {
		self = $(t);
		self.parent().parent().addClass("hidden");

		htmlText = "<li>"
				+ $("#pl").val()
				+ "<div class='col-md-offset-8'>"
				+ "评论人："
				+ "游客"
				+ "&nbsp;&nbsp;&nbsp;&nbsp;"
				+ getDate()
				+ "</div>"
				+ "<div class=' hidden'>"
				+ "<form> "
				+ " <textarea class='form-control' rows='3' id='pl'></textarea> "
				+ "</form> "
				+ "<div class='col-md-offset-10' style='margin-top:20px'> "
				+ "<div class='btn btn-default btn-sm' onclick='replayCancel(this)'> "
				+ " <span class='glyphicon glyphicon-remove'</span>取消 "
				+ "</div>&nbsp;&nbsp;&nbsp;&nbsp; "
				+ " <div class='btn btn-default btn-sm' onclick='replayOk(this)'> "
				+ "<span class='glyphicon glyphicon-ok'></span>提交 "
				+ " </div> "
				+ " </div> "
				+ "</div>"
				+ "<div class='col-md-offset-10'>"
				+ "<a href='#' onclick='replay(this)'>回复</a>"
				+ "</div>"
				+ "<hr/></li>"
		self.parent().parent().parent().append("<ul>" + htmlText + "</ul>");

		$("li").mouseenter(function () {
			$(self).css("background-color", "#EEEEEE");
		});
		$("li").mouseleave(function () {
			$(self).css("background-color", "#fff");
		});
	}

	//点击取消
	function replayCancel(t)
	{
		self = $(t);
		self.parent().parent().addClass("hidden");
	}

	//获取当前时间
	function getDate() {
		var d = new Date()
		var vYear = d.getFullYear()
		var vMon = d.getMonth() + 1
		var vDay = d.getDate()
		var h = d.getHours();
		var m = d.getMinutes();
		var se = d.getSeconds();
		return s = vYear + "-" + (vMon < 10 ? "0" + vMon : vMon) + "-" + (vDay < 10 ? "0" + vDay : vDay) + " " + (h < 10 ? "0" + h : h) + ":" + (m < 10 ? "0" + m : m) + ":" + (se < 10 ? "0" + se : se);
	}
</script>
	</body>
</html>